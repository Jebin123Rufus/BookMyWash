<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BookMyWash</title>
  <link rel="icon" type="image/png" href="BMW.png">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <video autoplay loop muted playsinline class="bg-video" id="bg-video">
    <source src="bubble.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>
  <div class="glass-overlay"></div>
  <div class="app-container">
    <header class="header">
      <div class="container header-content">
        <div class="logo">
          <img id="BookMyWash" src="BMW.png">
          <h1>BookMyWash</h1>
        </div>
        <div class="user-nav">
          <button class="icon-button" id="notifications-button">
            <span class="sr-only">Notifications</span>
          </button>
          <button id="free-wash-header-btn" class="button button-primary" style="margin-right: 1rem;">Free Wash (0)</button>
          <button id="feedback-fab" style="background:#0ea5e9;color:#fff;border:none;border-radius:2rem;padding:0.5rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;box-shadow:0 2px 8px rgba(14,165,233,0.13);margin-right:1rem;display:flex;align-items:center;gap:0.5rem;">
            <span style="font-size:1.2rem;">&#9998;</span> Feedback
          </button>
          <div class="dropdown">
            <button class="avatar-button" id="user-menu-button">
              <div class="avatar">
                <span>SC</span>
              </div>
            </button>
            <div class="dropdown-menu" id="user-dropdown">
              <div class="dropdown-header">
                <p class="dropdown-title" id="dropdown-username"></p>
                <p class="dropdown-subtitle" id="dropdown-email"></p>
              </div>
              <div class="dropdown-divider"></div>
              <div class="dropdown-item" id="logout-button">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                <span>Log out</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </header>

    <main class="main-content container">
      <div class="tabs">
        <div class="tabs-list">
          <button class="tab-button active" data-tab="book">Book a Slot</button>
          <button class="tab-button" data-tab="mybookings">My Bookings</button>
        </div>
        
        <div class="tab-content active" id="book-tab">
          <div class="booking-layout">
            <!-- Booking Left Section -->
            <div class="booking-left">
              <div class="section-header">
                <h2>Book a Laundry Slot</h2>
                <p class="text-muted">Select a date, time, and machine to book your laundry slot.</p>
              </div>
          
              <div class="date-picker-section">
                <h3>Select Date</h3>
                <div class="date-picker">
                  <button id="date-picker-button" class="date-picker-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                      <rect width="18" height="18" x="3" y="4" rx="2" ry="2"></rect>
                      <line x1="16" x2="16" y1="2" y2="6"></line>
                      <line x1="8" x2="8" y1="2" y2="6"></line>
                      <line x1="3" x2="21" y1="10" y2="10"></line>
                    </svg>
                    <span id="selected-date">Select a date</span>
                  </button>
                  <div id="calendar-popup" class="calendar-popup">
                    <div class="calendar-header">
                      <button id="prev-month" class="calendar-nav-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                          <path d="m15 18-6-6 6-6"></path>
                        </svg>
                      </button>
                      <div id="current-month-year">April 2025</div>
                      <button id="next-month" class="calendar-nav-button">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                          <path d="m9 18 6-6-6-6"></path>
                        </svg>
                      </button>
                    </div>
                    <div class="calendar-grid">
                      <div class="calendar-day-header">Su</div>
                      <div class="calendar-day-header">Mo</div>
                      <div class="calendar-day-header">Tu</div>
                      <div class="calendar-day-header">We</div>
                      <div class="calendar-day-header">Th</div>
                      <div class="calendar-day-header">Fr</div>
                      <div class="calendar-day-header">Sa</div>
                      <!-- Calendar days will be inserted here by JavaScript -->
                    </div>
                  </div>
                </div>
              </div>
          
              <div class="time-slot-section">
                <h3>Select Time Slot</h3>
                <div class="select-wrapper">
                  <select id="time-slot-select" class="select">
                    <option value="" disabled selected>Select a time slot</option>
                    <option value="08:00-09:00">08:00 - 09:00</option>
                    <option value="09:00-10:00">09:00 - 10:00</option>
                    <option value="10:00-11:00">10:00 - 11:00</option>
                    <option value="11:00-12:00">11:00 - 12:00</option>
                    <option value="12:00-13:00">12:00 - 13:00</option>
                    <option value="13:00-14:00">13:00 - 14:00</option>
                    <option value="14:00-15:00">14:00 - 15:00</option>
                    <option value="15:00-16:00">15:00 - 16:00</option>
                    <option value="16:00-17:00">16:00 - 17:00</option>
                    <option value="17:00-18:00">17:00 - 18:00</option>
                    <option value="18:00-19:00">18:00 - 19:00</option>
                    <option value="19:00-20:00">19:00 - 20:00</option>
                    <option value="20:00-21:00">20:00 - 21:00</option>
                    <option value="21:00-22:00">21:00 - 22:00</option>
                  </select>
                </div>
              </div>
          
              <!-- Booking Details Form -->
              <div class="card">
                <div class="card-header">
                  <h3 class="card-title">Booking Details</h3>
                  <p class="card-description">Complete your booking information to reserve your laundry slot.</p>
                </div>
                <div class="card-content">
                  <form id="booking-form" class="booking-form">
                    <div class="booking-summary">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                      </svg>
                      <div>
                        <h4>Booking Summary</h4>
                        <p>Please review your booking details before confirming.</p>
                      </div>
                    </div>
          
                    <button type="button" id="confirm-booking" class="button button-primary button-full" onclick="initiatePayment()">
                      Confirm Booking
                    </button>
                  </form>
                </div>
              </div>
            </div>
          
            <!-- Booking Right Section -->
            <div class="booking-right">
              <div class="machine-selector-section">
                <h3>Select Machine Type</h3>
                <div class="button-group">
                  <button class="filter-button active" data-filter="all">All</button>
                  <button class="filter-button" data-filter="washer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                      <rect width="18" height="20" x="3" y="2" rx="2"></rect>
                      <circle cx="12" cy="12" r="6"></circle>
                      <circle cx="12" cy="12" r="2"></circle>
                    </svg>
                    Washers
                  </button>
                  <button class="filter-button" data-filter="dryer">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                      <path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"></path>
                    </svg>
                    Dryers
                  </button>
                </div>
          
                <h3>Available Machines</h3>
                <div class="machine-grid" id="machine-grid">
                  <!-- Machine cards will be inserted here by JavaScript -->
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="tab-content" id="mybookings-tab">
          <div class="section-header" style="text-align: center;">
            <h2>My Bookings</h2>
            <p class="text-muted">View and manage your upcoming laundry bookings.</p>
          </div>
          
          <div class="bookings-tabs">
            <div class="tabs-list" style="display: none;"></div>
            <div class="bookings-tab-content active" id="upcoming-bookings" style="display: flex; flex-direction: column; align-items: center; min-height: 200px;">
              <h3 id="upcoming-heading" style="margin-bottom: 1rem; text-align: center; font-size: 1.4rem; color: #0ea5e9; font-weight: 600; letter-spacing: 1px;">Upcoming(0)</h3>
              <div id="upcoming-bookings-list" class="bookings-list" style="width: 100%; max-width: 600px;">
                <!-- Upcoming bookings will be inserted here by JavaScript -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Feedback Modal -->
    <div id="feedback-modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.35);z-index:1300;align-items:center;justify-content:center;">
      <div style="background:rgba(20,40,60,0.97);padding:2.2rem 1.7rem 1.7rem 1.7rem;border-radius:20px;max-width:370px;width:90vw;box-shadow:0 8px 32px rgba(14,165,233,0.18);display:flex;flex-direction:column;align-items:center;">
        <button id="close-feedback-modal" style="position:absolute;top:1.2rem;right:1.7rem;background:none;border:none;font-size:1.5rem;color:#64748b;cursor:pointer;">&times;</button>
        <h2 style="color:#0ea5e9;margin:0 0 0.7rem 0;font-size:1.35rem;font-weight:700;letter-spacing:0.5px;">We value your feedback</h2>
        <p style="color:#cbd5e1;font-size:1rem;margin-bottom:1.2rem;text-align:center;max-width:90%;">Help us improve BookMyWash! Share your thoughts, suggestions, or report any issues below.</p>
        <textarea id="feedback-text" rows="4" style="width:100%;border-radius:10px;border:1.5px solid #0ea5e9;background:rgba(255,255,255,0.95);color:#0f172a;padding:0.9rem 1rem;font-size:1.05rem;resize:none;box-shadow:0 1px 4px rgba(14,165,233,0.07);outline:none;transition:border 0.2s;" placeholder="Type your feedback here..."></textarea>
        <div style="margin-top:1.2rem;width:100%;display:flex;justify-content:flex-end;">
          <button id="submit-feedback" style="background:linear-gradient(90deg,#0ea5e9 60%,#0369a1 100%);color:#fff;border:none;border-radius:2rem;padding:0.6rem 2.2rem;font-size:1.08rem;font-weight:600;cursor:pointer;box-shadow:0 2px 8px rgba(14,165,233,0.13);transition:background 0.2s;">Submit</button>
        </div>
        <div id="feedback-message" style="margin-top:1rem;font-weight:500;display:none;text-align:center;"></div>
      </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);">
      <div class="modal-overlay"></div>
      <div class="modal-container" style="background:#fff;padding:2rem 1.5rem;border-radius:16px;max-width:350px;width:90vw;box-shadow:0 4px 24px rgba(14,165,233,0.10);display:flex;flex-direction:column;align-items:center;position:relative;z-index:2;">
        <h3 style="color:#0ea5e9;margin-top:0;">Help</h3>
        <p style="color:#334155;">Need assistance? For booking issues, payment problems, or general questions, please mail to our support at jebinrufuz@gmail.com or visit the FAQ section in your student portal.</p>
        <button onclick="document.getElementById('help-modal').classList.remove('active')" style="margin-top:1.5rem;background:#0ea5e9;color:#fff;border:none;border-radius:2rem;padding:0.5rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;">Close</button>
      </div>
    </div>
    <!-- Terms Modal -->
    <div id="terms-modal" class="modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);">
      <div class="modal-overlay"></div>
      <div class="modal-container" style="background:#fff;padding:2rem 1.5rem;border-radius:16px;max-width:350px;width:90vw;box-shadow:0 4px 24px rgba(14,165,233,0.10);display:flex;flex-direction:column;align-items:center;position:relative;z-index:2;">
        <h3 style="color:#0ea5e9;margin-top:0;">Terms & Conditions</h3>
        <p style="color:#334155;">By using BookMyWash, you agree to abide by campus laundry policies. Bookings are non-transferable. Misuse of machines or repeated no-shows may result in suspension of booking privileges. Please read the full terms on our website.</p>
        <button onclick="document.getElementById('terms-modal').classList.remove('active')" style="margin-top:1.5rem;background:#0ea5e9;color:#fff;border:none;border-radius:2rem;padding:0.5rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;">Close</button>
      </div>
    </div>
    <!-- Privacy Modal -->
    <div id="privacy-modal" class="modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;align-items:center;justify-content:center;background:rgba(0,0,0,0.35);">
      <div class="modal-overlay"></div>
      <div class="modal-container" style="background:#fff;padding:2rem 1.5rem;border-radius:16px;max-width:350px;width:90vw;box-shadow:0 4px 24px rgba(14,165,233,0.10);display:flex;flex-direction:column;align-items:center;position:relative;z-index:2;">
        <h3 style="color:#0ea5e9;margin-top:0;">Privacy Policy</h3>
        <p style="color:#334155;">Your personal information is used only for booking and managing laundry slots. We do not share your data with third parties. For more details, please review our privacy policy on the official website.</p>
        <button onclick="document.getElementById('privacy-modal').classList.remove('active')" style="margin-top:1.5rem;background:#0ea5e9;color:#fff;border:none;border-radius:2rem;padding:0.5rem 1.5rem;font-size:1rem;font-weight:600;cursor:pointer;">Close</button>
      </div>
    </div>

    <footer class="footer">
      <div class="container footer-content">
        <p class="copyright">
          &copy; 2025 Campus Laundry. All rights reserved.
        </p>
        <div class="footer-links">
          <button class="button button-ghost" id="help-btn">Help</button>
          <button class="button button-ghost" id="terms-btn">Terms</button>
          <button class="button button-ghost" id="privacy-btn">Privacy</button>
        </div>
      </div>
    </footer>

    <script>
      document.getElementById('help-btn').onclick = function() {
        var modal = document.getElementById('help-modal');
        modal.style.display = 'flex';
        modal.classList.add('active');
      };
      document.getElementById('terms-btn').onclick = function() {
        var modal = document.getElementById('terms-modal');
        modal.style.display = 'flex';
        modal.classList.add('active');
      };
      document.getElementById('privacy-btn').onclick = function() {
        var modal = document.getElementById('privacy-modal');
        modal.style.display = 'flex';
        modal.classList.add('active');
      };
      // Close modal when clicking overlay
      document.querySelectorAll('.modal-overlay').forEach(function(overlay) {
        overlay.onclick = function() {
          var modal = this.parentElement;
          modal.style.display = 'none';
          modal.classList.remove('active');
        };
      });
      // Also close modal on close button
      document.querySelectorAll('.modal .modal-container button').forEach(function(btn) {
        btn.onclick = function() {
          var modal = this.closest('.modal');
          modal.style.display = 'none';
          modal.classList.remove('active');
        };
      });

      // Feedback modal logic
      const feedbackFab = document.getElementById('feedback-fab');
      const feedbackModal = document.getElementById('feedback-modal');
      const closeFeedbackModal = document.getElementById('close-feedback-modal');
      feedbackFab.onclick = function() {
        feedbackModal.style.display = 'flex';
        document.getElementById('feedback-text').value = '';
        document.getElementById('feedback-message').style.display = 'none';
      };
      closeFeedbackModal.onclick = function() {
        feedbackModal.style.display = 'none';
      };
      feedbackModal.onclick = function(e) {
        if (e.target === feedbackModal) feedbackModal.style.display = 'none';
      };
      // Feedback submit logic
      document.getElementById('submit-feedback').onclick = async function() {
        const text = document.getElementById('feedback-text').value.trim();
        const msg = document.getElementById('feedback-message');
        if (!text) {
          msg.textContent = 'Please enter your feedback.';
          msg.style.color = '#ef4444';
          msg.style.display = 'block';
          return;
        }
        try {
          const res = await fetch('http://localhost:5000/api/feedback', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ feedback: text })
          });
          if (res.ok) {
            msg.textContent = 'Thank you for your feedback!';
            msg.style.color = '#22c55e';
            msg.style.display = 'block';
            document.getElementById('feedback-text').value = '';
          } else {
            msg.textContent = 'Error submitting feedback.';
            msg.style.color = '#ef4444';
            msg.style.display = 'block';
          }
        } catch (e) {
          msg.textContent = 'Network error.';
          msg.style.color = '#ef4444';
          msg.style.display = 'block';
        }
      };
    </script>
  

  
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
  <script src="index.js"></script>
  
</body>
</html>
